"use strict";(self.webpackChunkadvanced_db=self.webpackChunkadvanced_db||[]).push([[966],{966:(e,n,l)=>{l.r(n),l.d(n,{default:()=>h});var s=l(9950),a=l(27741),o=l(97554),t=l(76580),d=l(56033),i=l(54998),r=l(22253),c=l(73878),u=l(44414);const m={title:{fontSize:24,fontWeight:400,lineHeight:"30px",color:"#252A32"}},h=function(e){const{setSelectedUser:n,accounts:l,rocketAuth:h,conversations:p,allAccountsById:v,setNewConversation:g}=(0,s.useContext)(i.d),[x,b]=(0,s.useState)([]),[w]=(0,r.Y)(),C=(0,c.d4)(e=>e.auth.account||{}),f=(0,s.useCallback)(async()=>{var l,s;const a=p.find(e=>{var n,l;return e.rid===h.user_id+(null===(n=v[x])||void 0===n?void 0:n._id)||e.rid===(null===(l=v[x])||void 0===l?void 0:l._id)+h.user_id});return e.handleModal(),null!==a&&void 0!==a&&a._id?n(a):g({_id:"newGroup",id:"newGroup",rid:"newGroup",members:x,fname:null===(l=v[x[0]])||void 0===l?void 0:l.name,name:null===(s=v[x[0]])||void 0===s?void 0:s.username,t:"d",status:"offline"})},[x,h]),j=(0,s.useCallback)(async()=>{console.log(x);const{names:n,usernames:l}=x.reduce((e,n)=>(e.names.push(v[n].name),e.usernames.push(v[n].username),e),{names:[],usernames:[]});console.log(n),e.handleModal();const s={_id:"newGroup",id:"newGroup",rid:"newGroup",members:x,fname:n.join(","),name:l.join(","),usernames:x,multiple:!0,t:"d",status:"offline"};console.log(s),g(s)},[x,h]),k=n=>{b([]),e.handleModal()};return console.log(x),(0,u.jsx)(t.x,{children:(0,u.jsx)(a.A,{title:null,footer:null,zIndex:1080,onOk:n=>{b([]),e.handleModal()},destroyOnClose:!0,onCancel:k,visible:e.visible,children:(0,u.jsxs)("div",{style:{padding:"5px 25px"},children:[(0,u.jsx)("h2",{style:m.title,children:w("New conversation")}),(0,u.jsxs)(d.oi,{className:"has-messages",children:[(0,u.jsx)(o.A,{showSearch:!0,placeholder:w("Select a member *"),onChange:e=>b([...new Set(e)]),value:x,style:{width:"100%"},className:"custom-select",optionFilterProp:"children",allowClear:!0,mode:"multiple",getPopupContainer:e=>e.parentNode,dropdownStyle:{backgroundColor:"#535263",padding:10},children:l.map(e=>e.username===C.id?null:(0,u.jsx)(o.A.Option,{className:"select-item",value:e.username,children:e.name},e.username))}),(0,u.jsx)("label",{htmlFor:"",className:"custom-select-label",children:w("Select a member *")})]}),(0,u.jsxs)(d.so,{children:[(0,u.jsx)(d.$n,{type:"reset",onClick:k,style:{height:51,marginRight:12},children:w("Cancel")}),(0,u.jsxs)(d.$$,{disabled:!x,onClick:x.length>1?j:f,children:[" ",w("Start messaging")]})]})]})})})}}}]);